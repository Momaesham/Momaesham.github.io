# Game Library

## Занятие 2. Состояние приложения и динамические данные

### Цель занятия
На этом занятии мы:

* разберём, что такое состояние (state)
* научимся хранить список игр как данные
* сделаем приложение динамическим
* научимся передавать данные через props
* добавим возможность **добавлять игры**

Это ключевое занятие: после него приложение перестаёт быть «статичным сайтом».

---

## Почему статический интерфейс — проблема

На прошлом занятии:

* список игр был захардкожен
* каждая игра существовала только в коде

Проблемы такого подхода:

* нельзя добавить игру без изменения кода
* нельзя изменить данные во время работы приложения
* интерфейс не реагирует на действия пользователя

Решение — **состояние приложения**.

---

## Что такое состояние (state)

Состояние — это данные, которые:

* могут изменяться
* влияют на то, что мы видим на экране

Примеры состояния в нашем приложении:

* список игр
* текст в поле ввода
* выбранный статус

В React состояние создаётся с помощью хука `useState`.

---

## Хук useState

Пример:

```js
const [games, setGames] = useState([])
```

Здесь:

* `games` — текущее состояние
* `setGames` — функция для его изменения
* `[]` — начальное значение

Важно:

* напрямую менять `games` нельзя
* обновление состояния перерисовывает интерфейс

---

## Почему нельзя менять state напрямую

❌ Неправильно:

```js
games.push(newGame)
```

✔️ Правильно:

```js
setGames([...games, newGame])
```

React отслеживает **замену данных**, а не их изменение.

---

## Структура данных игры

Каждая игра — это объект.

Пример:

```js
{
  id: 1,
  title: 'Cyberpunk 2077',
  genre: 'RPG',
  status: 'playing'
}
```

Зачем нужен `id`:

* React требует уникальный ключ
* удобно работать с конкретной игрой

---

## Где должен храниться state

Правило:

> State живёт в **самом верхнем компоненте**, которому он нужен.

В нашем случае:

* список игр нужен `GameList`
* добавление игры происходит в форме
* значит, state должен быть в `App`

`App` становится **центром управления данными**.

---

## Однонаправленный поток данных

В React:

* данные передаются **сверху вниз** через props
* события поднимаются **снизу вверх** через функции

Схема:

```
App (state)
 ├─ GameForm (добавляет игру)
 └─ GameList (отображает игры)
```

---

## Props — передача данных в компоненты

Props — это параметры компонента.

Пример:

```js
<GameList games={games} />
```

В компоненте:

```js
function GameList({ games }) {
  return ...
}
```

Props — **только для чтения**.

---

## Создание формы добавления игры

Мы создаём новый компонент:

```
GameForm.jsx
```

Задача компонента:

* получать данные от пользователя
* сообщать `App`, что нужно добавить игру

---

## Управляемые поля ввода

Каждое поле формы:

* связано со state
* обновляет state при вводе

Пример:

```js
const [title, setTitle] = useState('')
```

Это называется **controlled input**.

---

## Добавление игры

Алгоритм:

1. пользователь вводит данные
2. нажимает кнопку
3. создаётся объект игры
4. вызывается функция из `App`
5. обновляется state
6. интерфейс перерисовывается

---

## Практика

### Шаг 1. Перенос списка игр в App

* Удалить статические `GameItem`
* Создать `useState` в `App`
* Заполнить массив тестовыми играми

---

### Шаг 2. Передача списка в GameList

* Передать `games` через props
* Использовать `map` для отображения списка
* Добавить `key`

---

### Шаг 3. Динамический GameItem

* Передавать данные игры через props
* Отображать название, жанр и статус

---

### Шаг 4. Создание GameForm

* Поле ввода названия
* Выбор жанра
* Выбор статуса
* Кнопка «Добавить»

---

### Шаг 5. Добавление новой игры

* Создать функцию `addGame` в `App`
* Передать её в `GameForm`
* Добавлять игру в state

---

## Типичные ошибки

* хранить state в `GameList`
* менять массив напрямую
* забывать `key` при `map`
* делать логику внутри `GameItem`

---

## Итог занятия

После второго занятия:

* понимаем, что такое state
* умеем работать с `useState`
* используем props
* создаём динамический список
* понимаем архитектуру React-приложения

На следующем занятии:

* изменение статуса игры
* фильтрация
* логика работы с массивами
